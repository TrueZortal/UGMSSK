<body>
<div class = "upperbar">
<button><%= link_to "Reset Board", "/reset"%></button>
<button><%= link_to "Add Player", "/add_player"%></button>
<button><%= link_to "Remove Player", "/remove_player"%></button>
</div>
<section class ="gameplayrow">
<section class ="statusbox">
    <div class ="minionsandoptions">
      <% @game.players.sort_by {|player| player.name}.each do |player| %>
        <p class="centred_text"><%= "#{player.name} MANA:#{player.manapool.current}" %></p>
        <p class="centred_text"><% player.minions.each do |minion|%></p>
        <li class="smallcenteredtext"><%=minion.status%></li>
        <%end%>
      <% end %>
    </div>
  </section>
  <section class ="boardcontainer">
    <div>
      <table class = "board">
          <% @board.render_board.each_with_index do |line, index|%>
            <tr>
              <% line.each do |field| %>
                  <td>
                    <h1 data-controller="position" data-action="click->position#greet" address="<%= field.make_json %>" class="field" style="--position: <%= field.offset%>">
                    <span class="tooltiptext"><%= field.position.to_a%></span>
                    <% if field.occupied? %>
                      <%= image_tag field.occupant.icon,  class: "minion" %>
                    <% end %>
                    </h1>
                  </td>
              <% end %>
            </tr>
          <% end %>
      </table>
    </div>
  </section>
  <section class = "innerpadding"></section>
  <section class = "combatlog">
  <% EventLog.all.each do |line|%>
    <h1><%=line['event']%></h1>
  <% end %>
  </section>
  <section class = "padding"></section>
  </section>
  <div class = "upperbar">
    <%= form_with do |form| %>
      <% @game.players do |player|%>
          <% player.minions do |minion|%>
            <%= form.radio_button :age, "child" %>
            <%= form.label :age_child, "#{minion.quick_status}" %>
          <% end %>
        <% end %>

      <%= form.number_field :price, in: 0..@board.upper_limit, step: 1 %>
      <%= form.number_field :price, in: 0..@board.upper_limit, step: 1 %>
    <% end %>
  </div>
</body>



